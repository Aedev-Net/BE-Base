if(window.VNLP)VNLP.host="https://auth-v2-beta.vnlp.ai",VNLP.template='<div id="vnlp-chat-container">\n    <div id="vnlp-chat-icon" class="vnlp-shadow">\n        <img style="width:30px" src="https://gonjoy.com/static/icons/chat.svg">\n    </div>\n    <div id="vnlp-chat-dock" class="vnlp-shadow-light">\n        <span>VNLP Chatbot</span>\n    </div>\n    <div id="vnlp-chat-popup" class="vnlp-shadow">\n        <div id="vnlp-chat-popup-header">\n            <span id="vnlp-chat-popup-title">VNLP Chatbot</span>\n            <span id="vnlp-chat-popup-close">_</span>\n        </div>\n        <div id="vnlp-chat-inbox"> </div>\n        \n        <img id="vnlp-chat-reset" data-vnlp-tooltip="Reset" src="https://gonjoy.com/static/icons/reset.svg">\n        <input id="vnlp-chat-input" type="text" placeholder="Say somethings..."/>\n        <img id="vnlp-chat-send" src="https://gonjoy.com/static/icons/send.svg">\n    </div>\n</div>',VNLP.init=(()=>{VNLP.chatIcon=document.getElementById("vnlp-chat-icon"),VNLP.chatDock=document.getElementById("vnlp-chat-dock"),VNLP.chatInput=document.getElementById("vnlp-chat-input"),VNLP.chatPopup=document.getElementById("vnlp-chat-popup"),VNLP.chatInbox=document.getElementById("vnlp-chat-inbox"),VNLP.btnSend=document.getElementById("vnlp-chat-send"),VNLP.btnReset=document.getElementById("vnlp-chat-reset"),VNLP.popupTitle=document.getElementById("vnlp-chat-popup-title"),VNLP.popupHeader=document.getElementById("vnlp-chat-popup-header"),VNLP.btnClosePopup=document.getElementById("vnlp-chat-popup-close"),VNLP.container=document.getElementById("vnlp-chat-container"),VNLP.popupTitle.innerHTML=VNLP.options&&VNLP.options.title||"VNLP Chatbot",VNLP.chatInput.placeholder=VNLP.options&&VNLP.options.placeholder||"Say somethings...",VNLP.options&&VNLP.options.display&&"none"==VNLP.options.display||VNLP.show(),VNLP.dragElement(VNLP.chatIcon),VNLP.dragElement(VNLP.chatPopup),VNLP.btnClosePopup.onclick=function(){VNLP.drag||VNLP.closePopup()},VNLP.popupHeader.onclick=function(){VNLP.drag||VNLP.closePopup()},VNLP.chatIcon.onclick=function(){if(VNLP.drag)return;const e=VNLP.chatPopup.style.display;e&&"none"!=e?VNLP.closePopup():VNLP.showPopup()},VNLP.chatDock.onclick=function(){if(VNLP.drag)return;const e=VNLP.chatPopup.style.display;e&&"none"!=e?VNLP.closePopup():VNLP.showPopup()},VNLP.chatInput.onkeypress=function(e){13==e.keyCode&&VNLP.chat()},VNLP.chatInput.onkeyup=function(){VNLP.updateBtnSendStatus()},VNLP.btnSend.onclick=function(){VNLP.chat()},VNLP.btnReset.onclick=function(){VNLP.reset()}}),VNLP.showTyping=(()=>{VNLP.chatInbox.innerHTML=`${VNLP.chatInbox.innerHTML}<div class="vnlp-message">\n            <div class="vnlp-message-content vnlp-message-bot">\n                <div class="vnlp-tiblock">\n                    <div class="vnlp-tidot"></div>\n                    <div class="vnlp-tidot"></div>\n                    <div class="vnlp-tidot"></div>\n                </div>\n            </div>\n        </div>`,VNLP.chatInbox.scrollTop=VNLP.chatInbox.scrollHeight}),VNLP.updateBtnSendStatus=(()=>{VNLP.chatInput.value?(VNLP.btnSend.style.opacity=.8,VNLP.btnSend.style.cursor="pointer"):(VNLP.btnSend.style.opacity=.2,VNLP.btnSend.style.cursor="not-allowed")}),VNLP.chat=(()=>{const e=VNLP.chatInput.value;e&&(VNLP.messages.push({isUser:!0,text:e}),VNLP.chatInput.value="",VNLP.reloadChatInbox(),VNLP.send(e),VNLP.updateBtnSendStatus())}),VNLP.send=(e=>{VNLP.showTyping();const t=`${VNLP.host}/api/v1/sessions`,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){const e=JSON.parse(this.responseText),t=e&&e.data&&e.data.queryResult&&e.data.queryResult.fulfillmentText;VNLP.sessionId=e&&e.data&&e.data.responseId,VNLP.messages.push({isUser:!1,text:t||VNLP.options&&VNLP.options.defaultResponse||"Opps! Somethings went wrong!"}),VNLP.reloadChatInbox()}},n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("type","app"),n.setRequestHeader("Authorization",VNLP.appId);const o={text:e,sessionId:VNLP.sessionId};n.send(JSON.stringify(o))}),VNLP.reloadChatInbox=(()=>{let e="";VNLP.messages.forEach(t=>{e=t.isReset?`${e}<div class="vnlp-message">\n                    <p class="vnlp-message-content vnlp-message-reset">The conversation has been reset</p>\n                </div>`:`${e}<div class="vnlp-message">\n                    <p class="vnlp-message-content vnlp-message-${t.isUser?"user":"bot"}">\n                        ${t.text}\n                    </p>\n                </div>`}),VNLP.chatInbox.innerHTML=e,VNLP.chatInbox.scrollTop=VNLP.chatInbox.scrollHeight}),VNLP.appendCss=(()=>{const e=`${VNLP.host}/public/sdk/web/beta/1.0.1/vnlp.websdk.css`,t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}),VNLP.appendTemplate=(()=>{const e=document.createElement("div");e.innerHTML=VNLP.template,document.getElementsByTagName("body")[0].appendChild(e)}),VNLP.show=(()=>{VNLP.container.style.display="block",VNLP.showController()}),VNLP.hide=(()=>{VNLP.container.style.display="none"}),VNLP.showPopup=(()=>{VNLP.chatPopup.style.display="block",VNLP.chatIcon.style.display="none",VNLP.chatDock.style.display="none"}),VNLP.closePopup=(()=>{VNLP.chatPopup.style.display="none",VNLP.showController()}),VNLP.showController=(()=>{"dock"==(VNLP.options&&VNLP.options.controller)?(VNLP.chatIcon.style.display="none",VNLP.chatDock.style.display="block"):(VNLP.chatIcon.style.display="block",VNLP.chatDock.style.display="none")}),VNLP.clear=(()=>{VNLP.sessionId=null,VNLP.messages=[],VNLP.reloadChatInbox()}),VNLP.reset=(()=>{VNLP.sessionId=null,VNLP.messages.push({isReset:!0}),VNLP.reloadChatInbox()}),VNLP.clearAndClosePopup=(()=>{VNLP.clear(),VNLP.closePopup()}),VNLP.setController=(e=>{VNLP.options||(VNLP.options={}),VNLP.options.controller=e,VNLP.showController()}),window.onload=(()=>{VNLP.appendCss(),setTimeout(()=>{VNLP.appendTemplate(),VNLP.init(),VNLP.clear()},1e3)}),VNLP.dragElement=(e=>{var t=0,n=0,o=0,s=0;function p(e){VNLP.drag=!1,(e=e||window.event).preventDefault(),o=e.clientX,s=e.clientY,document.onmouseup=l,document.onmousemove=a}function a(p){(p=p||window.event).preventDefault(),t=o-p.clientX,n=s-p.clientY,o=p.clientX,s=p.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px",VNLP.drag=!0}function l(){document.onmouseup=null,document.onmousemove=null}document.getElementById(e.id+"-header")?document.getElementById(e.id+"-header").onmousedown=p:e.onmousedown=p});else{console.error("VNLP has not been declared yet!"),document.getElementById("vnlp-chat-container").style.display="none"}